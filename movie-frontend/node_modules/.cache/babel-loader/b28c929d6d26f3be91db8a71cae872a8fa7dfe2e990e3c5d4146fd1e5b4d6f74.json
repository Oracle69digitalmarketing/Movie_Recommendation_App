{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'../utils/axiosInstance';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Favorites=()=>{const[favorites,setFavorites]=useState([]);const[genre,setGenre]=useState('');const[page,setPage]=useState(1);const[total,setTotal]=useState(0);const limit=8;const token=localStorage.getItem('token');const fetchFavorites=async()=>{try{const res=await axios.get('/api/users/favorites',{headers:{Authorization:\"Bearer \".concat(token)},params:{page,limit,genre}});setFavorites(res.data.results);setTotal(res.data.total);}catch(err){console.error(err);toast.error('Failed to load favorites');}};useEffect(()=>{fetchFavorites();},[page,genre]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold mb-4\",children:\"Your Favorite Movies\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-4\",children:favorites.map(movie=>/*#__PURE__*/_jsxs(\"div\",{className:\"border p-2 rounded\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-semibold\",children:movie.title}),/*#__PURE__*/_jsx(\"p\",{children:movie.genre})]},movie.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{disabled:page===1,onClick:()=>setPage(prev=>prev-1),className:\"bg-gray-200 px-3 py-1 rounded disabled:opacity-50\",children:\"Prev\"}),/*#__PURE__*/_jsx(\"button\",{disabled:page*limit>=total,onClick:()=>setPage(prev=>prev+1),className:\"bg-gray-200 px-3 py-1 rounded disabled:opacity-50\",children:\"Next\"})]})]});};export default Favorites;","map":{"version":3,"names":["React","useEffect","useState","axios","toast","jsx","_jsx","jsxs","_jsxs","Favorites","favorites","setFavorites","genre","setGenre","page","setPage","total","setTotal","limit","token","localStorage","getItem","fetchFavorites","res","get","headers","Authorization","concat","params","data","results","err","console","error","className","children","map","movie","title","id","disabled","onClick","prev"],"sources":["/data/data/com.termux/files/home/Movie_Recommendation_App/movie-frontend/src/pages/Favorites.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from '../utils/axiosInstance';\nimport { toast } from 'react-toastify';\n\nconst Favorites = () => {\n  const [favorites, setFavorites] = useState([]);\n  const [genre, setGenre] = useState('');\n  const [page, setPage] = useState(1);\n  const [total, setTotal] = useState(0);\n  const limit = 8;\n  const token = localStorage.getItem('token');\n\n  const fetchFavorites = async () => {\n    try {\n      const res = await axios.get('/api/users/favorites', {\n        headers: { Authorization: `Bearer ${token}` },\n        params: { page, limit, genre },\n      });\n      setFavorites(res.data.results);\n      setTotal(res.data.total);\n    } catch (err) {\n      console.error(err);\n      toast.error('Failed to load favorites');\n    }\n  };\n\n  useEffect(() => {\n    fetchFavorites();\n  }, [page, genre]);\n\n  return (\n    <div className=\"p-4\">\n      <h1 className=\"text-xl font-bold mb-4\">Your Favorite Movies</h1>\n\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n        {favorites.map((movie) => (\n          <div key={movie.id} className=\"border p-2 rounded\">\n            <h2 className=\"font-semibold\">{movie.title}</h2>\n            <p>{movie.genre}</p>\n          </div>\n        ))}\n      </div>\n\n      <div className=\"flex justify-between mt-4\">\n        <button\n          disabled={page === 1}\n          onClick={() => setPage((prev) => prev - 1)}\n          className=\"bg-gray-200 px-3 py-1 rounded disabled:opacity-50\"\n        >\n          Prev\n        </button>\n        <button\n          disabled={page * limit >= total}\n          onClick={() => setPage((prev) => prev + 1)}\n          className=\"bg-gray-200 px-3 py-1 rounded disabled:opacity-50\"\n        >\n          Next\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Favorites;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}