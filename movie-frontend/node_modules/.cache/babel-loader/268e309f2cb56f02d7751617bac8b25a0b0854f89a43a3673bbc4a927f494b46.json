{"ast":null,"code":"import _objectSpread from\"/data/data/com.termux/files/home/Movie_Recommendation_App/movie-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useContext,useState,useEffect}from'react';import AuthContext from'../context/AuthContext';import api,{setAuthToken}from'../services/api';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(){const{token,user,logout}=useContext(AuthContext);const[message,setMessage]=useState('');const[movieForm,setMovieForm]=useState({title:'',genre:''});const[movies,setMovies]=useState([]);const[editingId,setEditingId]=useState(null);const navigate=useNavigate();useEffect(()=>{if(token){setAuthToken(token);fetchProtectedMessage();fetchMovies();}},[token]);const fetchProtectedMessage=async()=>{try{const res=await api.get('/movies/private');setMessage(res.data.message);}catch(_unused){setMessage('Failed to fetch message');}};const fetchMovies=async()=>{try{const res=await api.get('/movies');setMovies(res.data);}catch(_unused2){setMessage('Failed to fetch movies');}};const handleAddOrUpdateMovie=async e=>{e.preventDefault();try{if(editingId){await api.put(\"/movies/\".concat(editingId),movieForm);setMessage('Movie updated');}else{await api.post('/movies/add',movieForm);setMessage('Movie added');}setMovieForm({title:'',genre:''});setEditingId(null);fetchMovies();}catch(_unused3){setMessage('Failed to save movie');}};const handleEdit=movie=>{setMovieForm({title:movie.title,genre:movie.genre});setEditingId(movie._id);};const handleDelete=async id=>{try{await api.delete(\"/movies/\".concat(id));setMessage('Movie deleted');fetchMovies();}catch(_unused4){setMessage('Delete failed');}};const handleLogout=()=>{logout();setAuthToken(null);navigate('/login');};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Welcome, \",user===null||user===void 0?void 0:user.name]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"}),/*#__PURE__*/_jsx(\"h3\",{children:editingId?'Edit Movie':'Add Movie'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddOrUpdateMovie,className:\"form\",children:[/*#__PURE__*/_jsx(\"input\",{required:true,placeholder:\"Title\",value:movieForm.title,onChange:e=>setMovieForm(_objectSpread(_objectSpread({},movieForm),{},{title:e.target.value}))}),/*#__PURE__*/_jsx(\"input\",{required:true,placeholder:\"Genre\",value:movieForm.genre,onChange:e=>setMovieForm(_objectSpread(_objectSpread({},movieForm),{},{genre:e.target.value}))}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:editingId?'Update':'Add'})]}),/*#__PURE__*/_jsx(\"p\",{children:message}),/*#__PURE__*/_jsx(\"h3\",{children:\"My Movies\"}),/*#__PURE__*/_jsx(\"ul\",{children:movies.map(movie=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:movie.title}),\" \\u2014 \",movie.genre,/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(movie),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(movie._id),children:\"Delete\"})]},movie._id))})]});}","map":{"version":3,"names":["React","useContext","useState","useEffect","AuthContext","api","setAuthToken","useNavigate","jsx","_jsx","jsxs","_jsxs","Dashboard","token","user","logout","message","setMessage","movieForm","setMovieForm","title","genre","movies","setMovies","editingId","setEditingId","navigate","fetchProtectedMessage","fetchMovies","res","get","data","_unused","_unused2","handleAddOrUpdateMovie","e","preventDefault","put","concat","post","_unused3","handleEdit","movie","_id","handleDelete","id","delete","_unused4","handleLogout","className","children","name","onClick","onSubmit","required","placeholder","value","onChange","_objectSpread","target","type","map"],"sources":["/data/data/com.termux/files/home/Movie_Recommendation_App/movie-frontend/src/pages/Dashboard.jsx"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport AuthContext from '../context/AuthContext';\nimport api, { setAuthToken } from '../services/api';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function Dashboard() {\n  const { token, user, logout } = useContext(AuthContext);\n  const [message, setMessage] = useState('');\n  const [movieForm, setMovieForm] = useState({ title: '', genre: '' });\n  const [movies, setMovies] = useState([]);\n  const [editingId, setEditingId] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (token) {\n      setAuthToken(token);\n      fetchProtectedMessage();\n      fetchMovies();\n    }\n  }, [token]);\n\n  const fetchProtectedMessage = async () => {\n    try {\n      const res = await api.get('/movies/private');\n      setMessage(res.data.message);\n    } catch {\n      setMessage('Failed to fetch message');\n    }\n  };\n\n  const fetchMovies = async () => {\n    try {\n      const res = await api.get('/movies');\n      setMovies(res.data);\n    } catch {\n      setMessage('Failed to fetch movies');\n    }\n  };\n\n  const handleAddOrUpdateMovie = async (e) => {\n    e.preventDefault();\n    try {\n      if (editingId) {\n        await api.put(`/movies/${editingId}`, movieForm);\n        setMessage('Movie updated');\n      } else {\n        await api.post('/movies/add', movieForm);\n        setMessage('Movie added');\n      }\n      setMovieForm({ title: '', genre: '' });\n      setEditingId(null);\n      fetchMovies();\n    } catch {\n      setMessage('Failed to save movie');\n    }\n  };\n\n  const handleEdit = (movie) => {\n    setMovieForm({ title: movie.title, genre: movie.genre });\n    setEditingId(movie._id);\n  };\n\n  const handleDelete = async (id) => {\n    try {\n      await api.delete(`/movies/${id}`);\n      setMessage('Movie deleted');\n      fetchMovies();\n    } catch {\n      setMessage('Delete failed');\n    }\n  };\n\n  const handleLogout = () => {\n    logout();\n    setAuthToken(null);\n    navigate('/login');\n  };\n\n  return (\n    <div className=\"container\">\n      <h2>Dashboard</h2>\n      <p>Welcome, {user?.name}</p>\n      <button onClick={handleLogout}>Logout</button>\n\n      <h3>{editingId ? 'Edit Movie' : 'Add Movie'}</h3>\n      <form onSubmit={handleAddOrUpdateMovie} className=\"form\">\n        <input\n          required\n          placeholder=\"Title\"\n          value={movieForm.title}\n          onChange={(e) => setMovieForm({ ...movieForm, title: e.target.value })}\n        />\n        <input\n          required\n          placeholder=\"Genre\"\n          value={movieForm.genre}\n          onChange={(e) => setMovieForm({ ...movieForm, genre: e.target.value })}\n        />\n        <button type=\"submit\">{editingId ? 'Update' : 'Add'}</button>\n      </form>\n\n      <p>{message}</p>\n\n      <h3>My Movies</h3>\n      <ul>\n        {movies.map((movie) => (\n          <li key={movie._id}>\n            <strong>{movie.title}</strong> â€” {movie.genre}\n            <button onClick={() => handleEdit(movie)}>Edit</button>\n            <button onClick={() => handleDelete(movie._id)}>Delete</button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}