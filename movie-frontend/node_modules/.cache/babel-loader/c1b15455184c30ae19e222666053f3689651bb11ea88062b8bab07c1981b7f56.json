{"ast":null,"code":"import _objectSpread from\"/data/data/com.termux/files/home/Movie_Recommendation_App/movie-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{fetchTrending}from'../services/tmdb';import{toast}from'react-toastify';import axios from'../utils/axiosInstance';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const[movies,setMovies]=useState([]);const[loading,setLoading]=useState(true);const[favoriting,setFavoriting]=useState({});const token=localStorage.getItem('token');useEffect(()=>{fetchTrending().then(data=>{setMovies(data);setLoading(false);}).catch(err=>{console.error(err);toast.error('Failed to load trending movies');setLoading(false);});},[]);const handleFavorite=async movie=>{if(!token){toast.warn('Please log in to favorite movies');return;}if(favoriting[movie.id])return;setFavoriting(prev=>_objectSpread(_objectSpread({},prev),{},{[movie.id]:true}));try{await axios.post('/api/users/favorites',{movieId:movie.id,title:movie.title,posterPath:movie.poster_path},{headers:{Authorization:\"Bearer \".concat(token)}});toast.success(\"\".concat(movie.title,\" added to favorites\"));}catch(err){var _err$response;if(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===409){toast.info(\"\".concat(movie.title,\" is already in favorites\"));}else{toast.error('Failed to add favorite');}}finally{setFavoriting(prev=>_objectSpread(_objectSpread({},prev),{},{[movie.id]:false}));}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"\\uD83D\\uDD25 Trending Movies\"}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Loading...\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4\",children:movies.map(movie=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded p-2 relative group\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://image.tmdb.org/t/p/w500\".concat(movie.poster_path),alt:movie.title,className:\"rounded w-full h-72 object-cover\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-center text-sm font-medium\",children:movie.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-2 space-x-2 text-xs\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const link=\"\".concat(window.location.origin,\"/movie/\").concat(movie.id);navigator.clipboard.writeText(link);alert('Link copied!');},className:\"text-blue-600 underline\",children:\"Share\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const embedCode=\"<iframe src=\\\"\".concat(window.location.origin,\"/movie/\").concat(movie.id,\"\\\" width=\\\"600\\\" height=\\\"400\\\" frameborder=\\\"0\\\" allowfullscreen></iframe>\");navigator.clipboard.writeText(embedCode);alert('Embed code copied!');},className:\"text-green-600 underline\",children:\"Copy Embed Code\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFavorite(movie),disabled:favoriting[movie.id],className:\"absolute top-2 right-2 text-xs px-2 py-1 rounded \".concat(favoriting[movie.id]?'bg-gray-400 text-white cursor-not-allowed':'bg-red-600 hover:bg-red-700 text-white'),children:favoriting[movie.id]?'Saving...':'‚ù§Ô∏è'})]},movie.id))})]});};export default Home;","map":{"version":3,"names":["React","useEffect","useState","fetchTrending","toast","axios","jsx","_jsx","jsxs","_jsxs","Home","movies","setMovies","loading","setLoading","favoriting","setFavoriting","token","localStorage","getItem","then","data","catch","err","console","error","handleFavorite","movie","warn","id","prev","_objectSpread","post","movieId","title","posterPath","poster_path","headers","Authorization","concat","success","_err$response","response","status","info","className","children","map","src","alt","onClick","link","window","location","origin","navigator","clipboard","writeText","alert","embedCode","disabled"],"sources":["/data/data/com.termux/files/home/Movie_Recommendation_App/movie-frontend/src/pages/Home.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { fetchTrending } from '../services/tmdb';\nimport { toast } from 'react-toastify';\nimport axios from '../utils/axiosInstance';\n\nconst Home = () => {\n  const [movies, setMovies] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [favoriting, setFavoriting] = useState({});\n  const token = localStorage.getItem('token');\n\n  useEffect(() => {\n    fetchTrending()\n      .then(data => {\n        setMovies(data);\n        setLoading(false);\n      })\n      .catch(err => {\n        console.error(err);\n        toast.error('Failed to load trending movies');\n        setLoading(false);\n      });\n  }, []);\n\n  const handleFavorite = async (movie) => {\n    if (!token) {\n      toast.warn('Please log in to favorite movies');\n      return;\n    }\n\n    if (favoriting[movie.id]) return;\n\n    setFavoriting(prev => ({ ...prev, [movie.id]: true }));\n\n    try {\n      await axios.post('/api/users/favorites', {\n        movieId: movie.id,\n        title: movie.title,\n        posterPath: movie.poster_path,\n      }, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      toast.success(`${movie.title} added to favorites`);\n    } catch (err) {\n      if (err.response?.status === 409) {\n        toast.info(`${movie.title} is already in favorites`);\n      } else {\n        toast.error('Failed to add favorite');\n      }\n    } finally {\n      setFavoriting(prev => ({ ...prev, [movie.id]: false }));\n    }\n  };\n\n  return (\n    <div className=\"p-4 max-w-6xl mx-auto\">\n      <h2 className=\"text-2xl font-bold mb-4\">üî• Trending Movies</h2>\n\n      {loading ? (\n        <p className=\"text-gray-500\">Loading...</p>\n      ) : (\n        <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4\">\n          {movies.map((movie) => (\n            <div key={movie.id} className=\"bg-white shadow rounded p-2 relative group\">\n              <img\n                src={`https://image.tmdb.org/t/p/w500${movie.poster_path}`}\n                alt={movie.title}\n                className=\"rounded w-full h-72 object-cover\"\n              />\n              <h3 className=\"mt-2 text-center text-sm font-medium\">{movie.title}</h3>\n\n              <div className=\"text-center mt-2 space-x-2 text-xs\">\n                <button\n                  onClick={() => {\n                    const link = `${window.location.origin}/movie/${movie.id}`;\n                    navigator.clipboard.writeText(link);\n                    alert('Link copied!');\n                  }}\n                  className=\"text-blue-600 underline\"\n                >\n                  Share\n                </button>\n\n                <button\n                  onClick={() => {\n                    const embedCode = `<iframe src=\"${window.location.origin}/movie/${movie.id}\" width=\"600\" height=\"400\" frameborder=\"0\" allowfullscreen></iframe>`;\n                    navigator.clipboard.writeText(embedCode);\n                    alert('Embed code copied!');\n                  }}\n                  className=\"text-green-600 underline\"\n                >\n                  Copy Embed Code\n                </button>\n              </div>\n\n              <button\n                onClick={() => handleFavorite(movie)}\n                disabled={favoriting[movie.id]}\n                className={`absolute top-2 right-2 text-xs px-2 py-1 rounded ${\n                  favoriting[movie.id]\n                    ? 'bg-gray-400 text-white cursor-not-allowed'\n                    : 'bg-red-600 hover:bg-red-700 text-white'\n                }`}\n              >\n                {favoriting[movie.id] ? 'Saving...' : '‚ù§Ô∏è'}\n              </button>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Home;\n"],"mappings":"6JAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,aAAa,KAAQ,kBAAkB,CAChD,OAASC,KAAK,KAAQ,gBAAgB,CACtC,MAAO,CAAAC,KAAK,KAAM,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3C,KAAM,CAAAC,IAAI,CAAGA,CAAA,GAAM,CACjB,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACa,UAAU,CAAEC,aAAa,CAAC,CAAGd,QAAQ,CAAC,CAAC,CAAC,CAAC,CAChD,KAAM,CAAAe,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3ClB,SAAS,CAAC,IAAM,CACdE,aAAa,CAAC,CAAC,CACZiB,IAAI,CAACC,IAAI,EAAI,CACZT,SAAS,CAACS,IAAI,CAAC,CACfP,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACDQ,KAAK,CAACC,GAAG,EAAI,CACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CAClBnB,KAAK,CAACqB,KAAK,CAAC,gCAAgC,CAAC,CAC7CX,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAY,cAAc,CAAG,KAAO,CAAAC,KAAK,EAAK,CACtC,GAAI,CAACV,KAAK,CAAE,CACVb,KAAK,CAACwB,IAAI,CAAC,kCAAkC,CAAC,CAC9C,OACF,CAEA,GAAIb,UAAU,CAACY,KAAK,CAACE,EAAE,CAAC,CAAE,OAE1Bb,aAAa,CAACc,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,MAAE,CAACH,KAAK,CAACE,EAAE,EAAG,IAAI,EAAG,CAAC,CAEtD,GAAI,CACF,KAAM,CAAAxB,KAAK,CAAC2B,IAAI,CAAC,sBAAsB,CAAE,CACvCC,OAAO,CAAEN,KAAK,CAACE,EAAE,CACjBK,KAAK,CAAEP,KAAK,CAACO,KAAK,CAClBC,UAAU,CAAER,KAAK,CAACS,WACpB,CAAC,CAAE,CACDC,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYtB,KAAK,CAAG,CAC9C,CAAC,CAAC,CACFb,KAAK,CAACoC,OAAO,IAAAD,MAAA,CAAIZ,KAAK,CAACO,KAAK,uBAAqB,CAAC,CACpD,CAAE,MAAOX,GAAG,CAAE,KAAAkB,aAAA,CACZ,GAAI,EAAAA,aAAA,CAAAlB,GAAG,CAACmB,QAAQ,UAAAD,aAAA,iBAAZA,aAAA,CAAcE,MAAM,IAAK,GAAG,CAAE,CAChCvC,KAAK,CAACwC,IAAI,IAAAL,MAAA,CAAIZ,KAAK,CAACO,KAAK,4BAA0B,CAAC,CACtD,CAAC,IAAM,CACL9B,KAAK,CAACqB,KAAK,CAAC,wBAAwB,CAAC,CACvC,CACF,CAAC,OAAS,CACRT,aAAa,CAACc,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,MAAE,CAACH,KAAK,CAACE,EAAE,EAAG,KAAK,EAAG,CAAC,CACzD,CACF,CAAC,CAED,mBACEpB,KAAA,QAAKoC,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpCvC,IAAA,OAAIsC,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CAAC,8BAAkB,CAAI,CAAC,CAE9DjC,OAAO,cACNN,IAAA,MAAGsC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,YAAU,CAAG,CAAC,cAE3CvC,IAAA,QAAKsC,SAAS,CAAC,sDAAsD,CAAAC,QAAA,CAClEnC,MAAM,CAACoC,GAAG,CAAEpB,KAAK,eAChBlB,KAAA,QAAoBoC,SAAS,CAAC,4CAA4C,CAAAC,QAAA,eACxEvC,IAAA,QACEyC,GAAG,mCAAAT,MAAA,CAAoCZ,KAAK,CAACS,WAAW,CAAG,CAC3Da,GAAG,CAAEtB,KAAK,CAACO,KAAM,CACjBW,SAAS,CAAC,kCAAkC,CAC7C,CAAC,cACFtC,IAAA,OAAIsC,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CAAEnB,KAAK,CAACO,KAAK,CAAK,CAAC,cAEvEzB,KAAA,QAAKoC,SAAS,CAAC,oCAAoC,CAAAC,QAAA,eACjDvC,IAAA,WACE2C,OAAO,CAAEA,CAAA,GAAM,CACb,KAAM,CAAAC,IAAI,IAAAZ,MAAA,CAAMa,MAAM,CAACC,QAAQ,CAACC,MAAM,YAAAf,MAAA,CAAUZ,KAAK,CAACE,EAAE,CAAE,CAC1D0B,SAAS,CAACC,SAAS,CAACC,SAAS,CAACN,IAAI,CAAC,CACnCO,KAAK,CAAC,cAAc,CAAC,CACvB,CAAE,CACFb,SAAS,CAAC,yBAAyB,CAAAC,QAAA,CACpC,OAED,CAAQ,CAAC,cAETvC,IAAA,WACE2C,OAAO,CAAEA,CAAA,GAAM,CACb,KAAM,CAAAS,SAAS,kBAAApB,MAAA,CAAmBa,MAAM,CAACC,QAAQ,CAACC,MAAM,YAAAf,MAAA,CAAUZ,KAAK,CAACE,EAAE,+EAAsE,CAChJ0B,SAAS,CAACC,SAAS,CAACC,SAAS,CAACE,SAAS,CAAC,CACxCD,KAAK,CAAC,oBAAoB,CAAC,CAC7B,CAAE,CACFb,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CACrC,iBAED,CAAQ,CAAC,EACN,CAAC,cAENvC,IAAA,WACE2C,OAAO,CAAEA,CAAA,GAAMxB,cAAc,CAACC,KAAK,CAAE,CACrCiC,QAAQ,CAAE7C,UAAU,CAACY,KAAK,CAACE,EAAE,CAAE,CAC/BgB,SAAS,qDAAAN,MAAA,CACPxB,UAAU,CAACY,KAAK,CAACE,EAAE,CAAC,CAChB,2CAA2C,CAC3C,wCAAwC,CAC3C,CAAAiB,QAAA,CAEF/B,UAAU,CAACY,KAAK,CAACE,EAAE,CAAC,CAAG,WAAW,CAAG,IAAI,CACpC,CAAC,GA1CDF,KAAK,CAACE,EA2CX,CACN,CAAC,CACC,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnB,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}